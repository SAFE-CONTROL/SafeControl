#LyX 2.2 created this file. For more info see http://www.lyx.org/
\lyxformat 508
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass article
\begin_preamble
\usepackage{listings}
\usepackage{color} %red, green, blue, yellow, cyan, magenta, black, white
\definecolor{mygreen}{RGB}{28,172,0} % color values Red, Green, Blue
\definecolor{mylilas}{RGB}{170,55,241}

\lstset{language=Matlab,%
    %basicstyle=\color{red},
    breaklines=true,%
    morekeywords={matlab2tikz},
    keywordstyle=\color{blue},%
    morekeywords=[2]{1}, keywordstyle=[2]{\color{black}},
    identifierstyle=\color{black},%
    stringstyle=\color{mylilas},
    commentstyle=\color{mygreen},%
    showstringspaces=false,%without this there will be a symbol in the places where there is a space
    numbers=left,%
    numberstyle={\tiny \color{black}},% size of the numbers
    numbersep=9pt, % this defines how far the numbers are from the text
    emph=[1]{for,end,break},emphstyle=[1]\color{red}, %some words to emphasise
    %emph=[2]{word1,word2}, emphstyle=[2]{style},    
}
\end_preamble
\use_default_options true
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman "default" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\spacing single
\use_hyperref false
\papersize default
\use_geometry true
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 1cm
\topmargin 1cm
\rightmargin 1cm
\bottommargin 2cm
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
Logique de décision de validation de données
\end_layout

\begin_layout Standard
Dans les expressions algébriques données dans ce document :
\end_layout

\begin_layout Itemize
le symbole 
\series bold
point
\series default
 (
\series bold
.
\series default
) représente l'opérateur 
\begin_inset Quotes eld
\end_inset


\series bold
produit scalaire
\series default

\begin_inset Quotes erd
\end_inset

,
\end_layout

\begin_layout Itemize
le symbole 
\series bold
croix
\series default
 (
\begin_inset Formula $\boldsymbol{\times}$
\end_inset

) représente l'opérateur 
\begin_inset Quotes eld
\end_inset


\series bold
produit matriciel
\series default

\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Subsection*
Introduction
\end_layout

\begin_layout Standard
Pour la validation des données, nous devons mettre en place un algorithme
 permettant de discriminer les données valides des données invalides.
 Chaque composant validera ou invalidera les données des autres calculateurs,
 en considérant sa donnée comme valeur 
\begin_inset Quotes eld
\end_inset

valide
\begin_inset Quotes erd
\end_inset

 de référence et en considérant un écart tolérable 
\begin_inset Formula $\varepsilon$
\end_inset

.
 La validation de chaque composant 
\begin_inset Formula $i$
\end_inset

 sera donnée dans la ligne 
\begin_inset Formula $i$
\end_inset

 de la matrice de validation 
\begin_inset Formula $V$
\end_inset

.
 En fonction de la confiance du composant 
\begin_inset Formula $i$
\end_inset

 envers chaque autre composant et en fonction d'un égo aléatoire 
\begin_inset Formula $\gamma$
\end_inset

 (une réalisation par échantillonnage), un consensus sera calculé et déterminera
 l'avis retenu par le composant 
\begin_inset Formula $i$
\end_inset

, qui lui permettra de mettre à jour son taux de confiance envers les autres
 composants (cet avis sera propre au composant 
\begin_inset Formula $i$
\end_inset

 et ne sera pas communiqué aux autres composants, y compris l'arbitre :
 il sert uniquement à faire évoluer le taux de confiance propre au composant
 
\begin_inset Formula $i$
\end_inset

).
\end_layout

\begin_layout Section
Description de l'algorithme
\end_layout

\begin_layout Standard
Déterminer une tolérance d'erreur admissible.
 Par exemple, pour une commande sur un moteur dont l'amplitude est sur l'interva
lle [0;10] V, on peut considérer qu'une erreur de 1% FS (Full Scale = Pleine
 Echelle) soit 
\begin_inset Formula $10\times1\%=0.1$
\end_inset

 est admissible.
\end_layout

\begin_layout Enumerate
La donnée de référence considérée comme valide est celle du composant qui
 effectue la validation.
\end_layout

\begin_layout Enumerate
On discrimine les données par rapport à leur écart vis-à-vis de cette donnée
 de 
\begin_inset Quotes eld
\end_inset

référence
\begin_inset Quotes erd
\end_inset

 : si l'écart est inférieur (ou égal) au seuil de tolérance fixé, la donnée
 est considérée valide, sinon elle est considérée invalide.
 Une donnée absente est également considérée invalide.
\end_layout

\begin_layout Enumerate
On détermine un consensus en pondérant la validation de chaque composant
 par le taux de confiance du composant 
\begin_inset Formula $i$
\end_inset

 envers les composants dont est issu cette validation.
 Un égo aléatoire (multiplicateur du taux de confiance du composant envers
 lui-même) pour lui donner la possibilité de donner parfois un avis 
\begin_inset Quotes eld
\end_inset

différent
\begin_inset Quotes erd
\end_inset

 de l'avis général, ce qui permettra une diversification des taux de confiance
 en cas d'ambiguïté.
 Cet égo 
\begin_inset Formula $\gamma_{i}$
\end_inset

 sera tel que 
\begin_inset Formula $\gamma_{i}\in\left[1;1.5\right]$
\end_inset

 et sera donné par une nouvelle réalisation à chaque échantillonnage.
\end_layout

\begin_layout Enumerate
Le consensus permettra par la suite de modifier le taux de confiance propre
 au composant 
\begin_inset Formula $i$
\end_inset

 calculant la validation.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename images/validation_donnees.png
	width 12cm

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Validation de données
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "illustration_exemple"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard

\bar under
Formule :
\bar default

\begin_inset Formula 
\[
\boxed{\hat{v}_{i}=\left(\left(\Gamma_{i}\times M\right).\left(\gamma_{i}.\Gamma_{i}+\overline{\Gamma_{i}}\right)\right)\times V}
\]

\end_inset


\end_layout

\begin_layout Standard
On construit 
\begin_inset Formula $v_{i}$
\end_inset

, de coefficients 
\begin_inset Formula $e_{i,j}$
\end_inset

, à partir des coefficients 
\begin_inset Formula $\hat{e}_{i,j}$
\end_inset

 de 
\begin_inset Formula $\hat{v}_{i}$
\end_inset

 avec :
\begin_inset Formula 
\[
\begin{cases}
e_{i,j}=1, & \hat{e}_{i,j}\geq0\\
e_{i,j}=-1, & \hat{e}_{i,j}<0
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Section
Code Matlab
\end_layout

\begin_layout Standard
Le code Matlab pour implémenter cette fonction de consensus est la suivante
 :
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

function [v] = component_consensus_validation(M,V,i)
\end_layout

\begin_layout Plain Layout

% Paramètres :
\end_layout

\begin_layout Plain Layout

% M = matrice de confiance,
\end_layout

\begin_layout Plain Layout

% V = matrice de validation,
\end_layout

\begin_layout Plain Layout

% i = indice du composant effectuant le consensus de validation
\end_layout

\begin_layout Plain Layout

%
\end_layout

\begin_layout Plain Layout

% Sortie :
\end_layout

\begin_layout Plain Layout

% v = vecteur de validation {1 = donnée valide, -1 = donnée invalide}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

gamma = 1+0.5*rand; % ego aléatoire entre 1 et 1.5
\end_layout

\begin_layout Plain Layout

G=zeros(1,6);     G(i)=1;
\end_layout

\begin_layout Plain Layout

Gc=ones(1,6);     Gc(i)=0;
\end_layout

\begin_layout Plain Layout

v=(((G*M).*(gamma*M*G+Gc))*V>=0).*2-1;
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

end
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
Exemple
\end_layout

\begin_layout Itemize
Considérons 
\begin_inset Formula $V$
\end_inset

 une matrice de validation de chaque composant extraite de la Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "illustration_exemple"

\end_inset

ci-dessus (
\bar under
remarque :
\bar default
 
\begin_inset Formula $V$
\end_inset

 est toujours symétrique de par la méthode de validation) :
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
V=\begin{bmatrix}1 & 1 & -1 & -1 & -1 & 1\\
1 & 1 & -1 & -1 & -1 & -1\\
-1 & -1 & 1 & -1 & -1 & 1\\
-1 & -1 & -1 & 1 & -1 & -1\\
-1 & -1 & -1 & -1 & 1 & 1\\
1 & -1 & 1 & -1 & 1 & 1
\end{bmatrix}
\]

\end_inset


\end_layout

\begin_layout Itemize
Considérons 
\begin_inset Formula $M$
\end_inset

 une matrice de confiance des composants :
\begin_inset Formula 
\[
M=\begin{bmatrix}1.0 & 1.0 & 0.9 & 1.0 & 0.2 & 0.1\\
1.0 & 1.0 & 1.0 & 1.0 & 0.2 & 0.1\\
0.9 & 0.9 & 1.0 & 1.0 & 0.2 & 0.2\\
1.0 & 0.9 & 0.8 & 0.9 & 0.3 & 0.2\\
0.0 & 0.0 & 0.0 & 0.0 & 0.8 & 0.7\\
0.0 & 0.0 & 0.0 & 0.0 & 0.8 & 0.9
\end{bmatrix}
\]

\end_inset


\end_layout

\begin_layout Standard
Calculons la validation du composant 1 avec un égo aléatoire tiré 
\begin_inset Formula $\gamma_{1}=1.5$
\end_inset

 :
\begin_inset Formula 
\[
\hat{v}_{1}=\left(\left(\Gamma_{1}\times M\right).\left(\gamma_{1}.\Gamma_{1}+\overline{\Gamma_{1}}\right)\right)\times V
\]

\end_inset


\begin_inset Formula 
\[
\hat{v}_{1}=\left(\begin{bmatrix}1.0 & 1.0 & 0.9 & 1.0 & 0.2 & 0.1\end{bmatrix}.\begin{bmatrix}1.5 & 1 & 1 & 1 & 1 & 1\end{bmatrix}\right)\times\begin{bmatrix}1 & 1 & -1 & -1 & -1 & 1\\
1 & 1 & -1 & -1 & -1 & -1\\
-1 & -1 & 1 & -1 & -1 & 1\\
-1 & -1 & -1 & 1 & -1 & -1\\
-1 & -1 & -1 & -1 & 1 & 1\\
1 & -1 & 1 & -1 & 1 & 1
\end{bmatrix}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\hat{v}_{1}=\begin{bmatrix}1.5 & 1.0 & 0.9 & 1.0 & 0.2 & 0.1\end{bmatrix}\times\begin{bmatrix}1 & 1 & -1 & -1 & -1 & 1\\
1 & 1 & -1 & -1 & -1 & -1\\
-1 & -1 & 1 & -1 & -1 & 1\\
-1 & -1 & -1 & 1 & -1 & -1\\
-1 & -1 & -1 & -1 & 1 & 1\\
1 & -1 & 1 & -1 & 1 & 1
\end{bmatrix}
\]

\end_inset


\begin_inset Formula 
\[
\hat{v}_{i}=\begin{bmatrix}0.5 & 0.3 & -2.7 & -2.7 & -4.1 & 0.7\end{bmatrix}
\]

\end_inset


\begin_inset Formula 
\[
\implies v_{1}=\begin{bmatrix}1 & 1 & -1 & -1 & -1 & 1\end{bmatrix}
\]

\end_inset


\end_layout

\begin_layout Standard
En appliquant le même raisonnement pour chaque composant, avec un taux d'égo
 constant de 2 (pour simplifier) on obtient la matrice de validation après
 consensus 
\begin_inset Formula $V_{G}$
\end_inset

 (taux d'égo constant de 1.5) issu de 
\begin_inset Formula $V$
\end_inset

 et 
\begin_inset Formula $M$
\end_inset

 :
\begin_inset Formula 
\[
V_{G}=\begin{bmatrix}1 & 1 & -1 & -1 & -1 & 1\\
1 & 1 & -1 & -1 & -1 & -1\\
-1 & -1 & \boldsymbol{{\color{red}-1}} & -1 & -1 & 1\\
-1 & -1 & -1 & \boldsymbol{{\color{red}-1}} & -1 & {\color{green}\boldsymbol{1}}\\
-1 & -1 & -1 & -1 & 1 & 1\\
1 & -1 & 1 & -1 & 1 & 1
\end{bmatrix}
\]

\end_inset


\end_layout

\begin_layout Standard
Pour rappel :
\begin_inset Formula 
\[
V=\begin{bmatrix}1 & 1 & -1 & -1 & -1 & 1\\
1 & 1 & -1 & -1 & -1 & -1\\
-1 & -1 & 1 & -1 & -1 & 1\\
-1 & -1 & -1 & 1 & -1 & -1\\
-1 & -1 & -1 & -1 & 1 & 1\\
1 & -1 & 1 & -1 & 1 & 1
\end{bmatrix}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
En comparant à la matrice 
\begin_inset Formula $V$
\end_inset

 initiale, on constate que 3 valeurs ont changées :
\end_layout

\begin_layout Itemize
la donnée du calculateur 3 après consensus est invalidée : en effet, le
 composant 3 fait confiance aux composants 1,2 et 4 qui déclarent la valeur
 donnée par le composant 3 (lui-même donc) invalide : malgré son égo, il
 tient compte de l'avis des autres et invalide la donnée,
\end_layout

\begin_layout Itemize
le même raisonnement s'applique pour la donnée du composant 4.
\end_layout

\begin_layout Itemize
la donnée du composant 6 était invalidée par le composant 4 alors qu'elle
 est validée après consensus.
 Le composant 4 indique, avec le composant 2 (en qui il a confiance), que
 la donnée du composant 6 est invalide.
 Mais les composants 1 et 3 (en qui il le composant 4 fait aussi confiance)
 l'invalident.
 C'est aussi le cas des composants 5 et 6, en qui le composant 4 à une faible
 confiance (mais une confiance non négligeable ici).
 Le composant 4 va donc pencher, malgré son égo, vers l'avis des composants
 1,3,5 et 6 et valider la donnée du composant 6.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
Poursuivons l'analyse pour la donnée du composant 2 : si l'égo est de 1.3
 la donnée est validée pas les composants 1 et 2 (matrice suivante 
\begin_inset Formula $M_{1.3}$
\end_inset

).
 Si l'égo vaut 1.2, la donnée est invalidée par ces mêmes composants (matrice
 suivante 
\begin_inset Formula $M_{1.2}$
\end_inset

) :
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
M_{1.3}=\begin{bmatrix}\boldsymbol{1} & \boldsymbol{{\color{blue}1}} & \boldsymbol{-1} & \boldsymbol{-1} & \boldsymbol{-1} & \boldsymbol{1}\\
\boldsymbol{1} & \boldsymbol{{\color{blue}1}} & \boldsymbol{-1} & \boldsymbol{-1} & \boldsymbol{-1} & \boldsymbol{1}\\
-1 & -1 & -1 & -1 & -1 & 1\\
-1 & -1 & -1 & -1 & -1 & 1\\
-1 & -1 & -1 & -1 & 1 & 1\\
1 & -1 & 1 & -1 & 1 & 1
\end{bmatrix},\,M_{1,2}=\begin{bmatrix}\boldsymbol{1} & \boldsymbol{{\color{blue}-1}} & \boldsymbol{-1} & \boldsymbol{-1} & \boldsymbol{-1} & \boldsymbol{1}\\
\boldsymbol{1} & \boldsymbol{{\color{blue}-1}} & \boldsymbol{-1} & \boldsymbol{-1} & \boldsymbol{-1} & \boldsymbol{1}\\
-1 & -1 & -1 & -1 & -1 & 1\\
-1 & -1 & -1 & -1 & -1 & 1\\
-1 & -1 & -1 & -1 & 1 & 1\\
1 & -1 & 1 & -1 & 1 & 1
\end{bmatrix}
\]

\end_inset


\end_layout

\begin_layout Standard
D'après le cas étudié illustré Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "illustration_exemple"

\end_inset

 dont on a déduit la matrice 
\begin_inset Formula $V$
\end_inset

 et avec la matrice 
\begin_inset Formula $M$
\end_inset

 considérée, cela paraît cohérent : la validité du composant 2 semble ambigüe
 et selon l'égo du composant 1 ou 2 on pourrait aussi bien considérer la
 valeur valide ou non !
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
Ici nous avons, encore une fois, considéré un cas extrême ou tout les composants
 renvoient des valeurs relativement éloignées et avec 2 composants potentielleme
nt défaillants mais avec une forte confiance mutuelle.
 En règle générale, les composants ne devraient pas devenir défaillants
 simultanément, il est encore plus improbable qu'ils renvoient tous des
 valeurs différentes aussi éloignées et enfin, encore moins probable que
 la confiance de la population se scinde en 2 clans comme c'est le cas ici
 avec les composants 
\begin_inset Formula $\left\{ 1,2,3,4\right\} $
\end_inset

 et 
\begin_inset Formula $\left\{ 5,6\right\} $
\end_inset

 : l'opinion d'un composant suivra presque systématiquement toujours la
 majorité (au moins avec un nombre de composants 
\begin_inset Quotes eld
\end_inset

sains
\begin_inset Quotes erd
\end_inset

 aussi important) car dès qu'un composant devient défaillant, l'ensemble
 des autres composants devraient l'exclure et son taux de confiance diminuera
 rapidement (malgré l'égo de chaque composant), ce qui diminuera d'autant
 plus son influence sur les avis futurs...
\end_layout

\end_body
\end_document
